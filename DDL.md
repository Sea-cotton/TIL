> # DDL

## CREATE TABLE

- contacts 테이블 생성
  - `테이블명 테이블타입 제약조건`
  - id컬럼은 우리가 따로 정의하지 않으면 자동으로 rowid 라는 이름으로 만들어짐.

### SQLite Data Types

- 데이터 타입 종류 (5가지)
  
  - NULL
    
    - 정보가 없거나 알 수 없음
    
    - 값이 따옴표없이 NULL이면
  
  - INTEGER
    
    - 정수
    
    - 값을 둘러싸는 따옴표와 소수점, 지수가 없으면
  
  - REAL
    
    - 실수
    
    - 값에 따옴표나 소수점, 지수가 없으면
  
  - TEXT
    
    - 문자
    
    - 값이 작은 따옴표나 큰따옴표로 묶이면
  
  - BOLB
    
    - 이진
    
    - 대표적으로 멀티미디어(이미지)파일

- SQLite에는 별도의 Boolean 타입이 없다.
  
  - Boolean 값은 정수 0(false)와 1(true)로 저장됨

- SQLite에는 날짜 및 시간을 저장하기 위한 타입이 없다.
  
  - 대신 SQLite의 built-in “Data And Time Fuctions”으로 TEXT, REAL 또는 INTEGER 값으로 저장 가능

- 다른 SQL DB 엔진(MySQL, PostgreSQL 등)은 정적이고 엄격한 타입이다.

- 반면, SQLite는 동적 타입 시스템사용
  
  - 컬럼에 선언된 데이터 타입에 의해서가 아니라, **‘컬럼에 저장된 값에 따라 데이터 타입이 결정됨’**
  
  - 즉, 위에서 TEXT, INTEGER 등으로 지정해줘도 실제 값이 더 우선된다는 것.
  
  - 동일한 컬럼에 정수 1을 넣으면 INTEGER타입으로 지정되고, 문자’1’을 넣을 경우 TEXT 타입으로 지정된다.
  
  - 다만, 다른 데이터베이스와의 호환성 문제때문에 데이터타입을 지정하는 것을 권장한다.

- 타입선호도
  - 특정 컬럼에 저장된 데이터에 권장되는 타입
  
  - SQLite 5가지 데이터 타입이 아닌 다른 타입을 선언한다면, 내부적으로 각 타입의 지정된 선호도에 따라 5가지 선호도로 인식됨
  
  - 존재이유
    
    - 다른 데이터베이스 엔진간의 ‘호환성’을 최대화
    - 정적이고 엄격한 타입을 사용하는 데이터베이스의 SQL문을 SQLite에서도 작동하도록 하기 위함

### Constraints

- “제약 조건”

- 입력하는 자료에 대해 제약을 정함

- 제약에 맞지 않다면 입력이 거부됨

- 사용자가 원하는 조건의 데이터만 유지하기 위해, 즉 데이터의 무결성을 유지하기 위한 보편적인 방법으로 테이블의 특정 컬럼에 설정하는 제약

- 데이터 무결성
  
  - DB 내의 데이터에 대한 정확성, 일관성을 보장하기 위해 데이터 변경 혹은 수정 시 여러 제한을 두어 데이터의 정확성을 보증하는 것
    - 즉, 정확성과 일관성을 나타낸다.
  - 무결성 보장 및 일관되게 유지하는것이 목적

- 종류
  
  - NOT NULL
    - 컬럼이 NULL 값을 허용하지 않도록 함
    
    - 기본적으로 이 조건을 명시적으로 사용하는 경우를 제외하고는 NULL 값 허용
  - UNIQUE
    - 컬럼의 모든 값이 서로 구별되거나 고유한 값이 되도록 함
    
    - 예) 모든 이용자들이 서로 다른 이메일
  - PRIMARY KEY
    - 테이블에서 행의 고유성을 식별하는데 사용되는 컬럼
    
    - 각 테이블에는 하나의 기본 키가 존재한다.
    
    - 암시적으로 NOT NULL 제약 조건이 포함되어 있다.
  - AUTOINCREMENT
    - 사용되지 않은 값이나 이전에 삭제된 행의 값을 재사용하는 것을 방지
    
    - INTEGER PRIMARY KEY 다음에 작성하면 해당 rowid를 다시 재사용하지 못하도록 함
    
    - 즉, SQLite에서는 기본적으로 재사용을 허용하고 있다.
    
    - 반면, Django에서는 테이블 생성시 기본적으로 재사용을 허용하지 않는다.(기본적인 제약조건임)
    
    - 그외 기타

- rowid의 특징
  - 테이블을 생성할때마다 rowid라는 암시적 자동 증가 컬럼이 자동으로 생성됨
  
  - 테이블 행을 고유하게 식별하는 64비트 부호 있는 정수 값
    
    - 즉, 한 테이블의 최대 행의 갯수는 2의 64승 (이론상)
  
  - 테이블에 새 행을 삽입할 때마다 정수 값을 자동으로 할당
  
  - 값은 1에서 시작
  
  - 삽입시 rowid 또는 INTEGER PRIMARY KEY 컬럼에 명시적으로 값이 지정되지 않은 경우, SQLite는 테이블에서 가장 큰 rowid보다 하나 큰 다음 순차 정수를 자동으로 할당(AUTOINCREMENT와 관계없이)
  
  - 만약 INTEGER PRIMARY KEY 키워드를 가진 컬럼을 직접 만들면 이 컬럼은 rowid 컬럼의 별칭이 된다.
  
  - 만약 꽉찼다면?
    
    - 사용되지 않은 정수를 찾을 수 없다면 SQLITE_FULL 에러 발생
